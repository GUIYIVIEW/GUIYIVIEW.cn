<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>GUIYIVIEW</title>
  
  <subtitle>ç”Ÿæ´»éšç¬”</subtitle>
  <link href="https://github.com/GUIYIVIEW/GUIYIVIEW.github.io.git/atom.xml" rel="self"/>
  
  <link href="https://github.com/GUIYIVIEW/GUIYIVIEW.github.io.git/"/>
  <updated>2022-11-04T07:38:40.441Z</updated>
  <id>https://github.com/GUIYIVIEW/GUIYIVIEW.github.io.git/</id>
  
  <author>
    <name>GUIYIVIEW</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>iOS LaunchScreen.storyboardå¯åŠ¨å›¾æ›´æ–°</title>
    <link href="https://github.com/GUIYIVIEW/GUIYIVIEW.github.io.git/2022/11/04/2022110408/"/>
    <id>https://github.com/GUIYIVIEW/GUIYIVIEW.github.io.git/2022/11/04/2022110408/</id>
    <published>2022-11-04T07:37:50.000Z</published>
    <updated>2022-11-04T07:38:40.441Z</updated>
    
    <content type="html"><![CDATA[<p>æ ¹æ®è‹¹æœè¦æ±‚2020å¹´4æœˆä¹‹åä¸Šçº¿çš„APPéƒ½å¿…é¡»ä½¿ç”¨LaunchScreené€‚é…å¯åŠ¨å›¾ï¼Œåœ¨ç ”ç©¶çš„è¿‡ç¨‹ä¸­å‘ç°è¿˜æ˜¯æœ‰ä¸€äº›å‘çš„ï¼Œè®°å½•ä¸€ä¸‹ã€‚</p><p>ç¯å¢ƒ: Xcode 11.3 + iPhone 11 + iOS 13.3</p><p>ä½¿ç”¨LaunchScreenè®¾ç½®å¯åŠ¨å›¾è¿è¡Œï¼Œä¹‹åæ›´æ–°å›¾ç‰‡å†…å®¹ï¼Œå‘ç°è¿è¡Œä»ç„¶æ˜¯æ—§çš„å›¾ç‰‡ã€‚ä¹Ÿè¯•è¿‡ç½‘ä¸Šçš„æ”¹åå­—ã€åˆ é™¤sbå†æ–°å»ºã€å¸è½½é‡è£…ã€å¸è½½+é‡å¯åé‡è£…ï¼Œåªæœ‰æœ€åä¸€é¡¹æ˜¯æ¯æ¬¡éƒ½æ˜¯æ­£ç¡®çš„ï¼Œå‰å‡ é¡¹å¤§å¤šæ•°æƒ…å†µä¸‹è¿˜æ˜¯é”™è¯¯çš„ã€‚</p><p>ä½¿ç”¨æ¨¡æ‹Ÿå™¨æµ‹è¯•å‘ç°ï¼Œåªæœ‰åœ¨å…¨é¢å±æ—¶ä¼šæ›´æ–°å¤±æ•ˆã€‚</p><p><strong>ä»¥ä¸‹è·¯å¾„åªåœ¨iOS 13ç³»ç»Ÿä¸‹æµ‹è¯•ï¼Œå…¶ä»–è®¾å¤‡çš„è·¯å¾„æœªæµ‹è¯•ã€‚å»ºè®®æ‰§è¡Œä¸‹é¢æ“ä½œæ—¶æ¯ä¸ªç‰ˆæœ¬åªæ‰§è¡Œä¸€æ¬¡ï¼Œå¦åˆ™ä¸çŸ¥é“ä¼šä¸ä¼šå‡ºç°é»‘ç™½å±ä¹‹ç±»çš„æƒ…å†µã€‚æµ‹è¯•çš„æ—¶å€™æ²¡æœ‰æ‰§è¡Œä¸‹é¢ä»£ç ï¼Œä»…ä»…æ˜¯é¢‘ç¹æ›´æ¢å¯åŠ¨å›¾å°±ä¼šå‡ºç°é»‘ç™½å±ã€‚</strong></p><h5 id="1-ç›´æ¥åˆ é™¤æˆªå›¾å­˜æ”¾çš„è·¯å¾„ç›®å½•"><a href="#1-ç›´æ¥åˆ é™¤æˆªå›¾å­˜æ”¾çš„è·¯å¾„ç›®å½•" class="headerlink" title="1.ç›´æ¥åˆ é™¤æˆªå›¾å­˜æ”¾çš„è·¯å¾„ç›®å½•"></a>1.ç›´æ¥åˆ é™¤æˆªå›¾å­˜æ”¾çš„è·¯å¾„ç›®å½•</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">NSString *path = [NSHomeDirectory() stringByAppendingPathComponent:@&quot;Library/SplashBoard/Snapshots&quot;];</span><br><span class="line">[[NSFileManager defaultManager] removeItemAtPath:path error:nil];</span><br></pre></td></tr></table></figure><p>å¯èƒ½æœ‰äº›è«åçš„æƒ…å†µä¸‹ä¼šä¼šå‡ºç°é»‘ç™½å±ï¼Œè¿™æ—¶å€™ä½¿ç”¨<code>1</code>æ–¹æ³•å¹¶ä¸èƒ½å®Œç¾è§£å†³ï¼Œä½¿ç”¨ä¸‹é¢çš„<code>2</code>æ–¹æ³•æµ‹è¯•ï¼Œå³æ—¶æ˜¯å‡ºç°äº†é»‘å±ï¼Œæ›¿æ¢ä¹‹åä¹Ÿå¯ä»¥æ˜¾ç¤ºæ­£å¸¸ã€‚</p><h5 id="2-æ›¿æ¢æˆªå›¾ç›®å½•ä¸‹æ–‡ä»¶"><a href="#2-æ›¿æ¢æˆªå›¾ç›®å½•ä¸‹æ–‡ä»¶" class="headerlink" title="2.æ›¿æ¢æˆªå›¾ç›®å½•ä¸‹æ–‡ä»¶"></a>2.æ›¿æ¢æˆªå›¾ç›®å½•ä¸‹æ–‡ä»¶</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">// è·å–æˆªå›¾å­˜å‚¨è·¯å¾„</span><br><span class="line">NSString *bundleID = [[NSBundle mainBundle].infoDictionary objectForKey:@&quot;CFBundleVersion&quot;];</span><br><span class="line">NSString *shotsDirName = [bundleID stringByAppendingString:@&quot; - &#123;DEFAULT GROUP&#125;&quot;];</span><br><span class="line">NSString *shotsPath = [NSHomeDirectory() stringByAppendingPathComponent:@&quot;Library/SplashBoard/Snapshots&quot;];</span><br><span class="line">shotsPath = [shotsPath stringByAppendingPathComponent:shotsDirName];</span><br><span class="line">NSError *readError = nil;</span><br><span class="line">NSArray *files = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:shotsPath error:&amp;readError];</span><br><span class="line">// éå†è¯¥ç›®å½•ä¸‹æˆªå›¾æ–‡ä»¶</span><br><span class="line">for (NSString *fileName in files) &#123;</span><br><span class="line">    NSString *path = [shotsPath stringByAppendingPathComponent:fileName];</span><br><span class="line">    NSError *error = nil;</span><br><span class="line">    NSData *data = [NSData dataWithContentsOfFile:path options:NSDataReadingMappedIfSafe error:&amp;error];</span><br><span class="line">    if (!error &amp;&amp; [data length]) &#123;</span><br><span class="line">        UIImage *image = [UIImage imageWithData:data];</span><br><span class="line">        if (image) &#123;</span><br><span class="line">            UIImage *launchImage = [UIImage imageNamed:@&quot;launch&quot;];</span><br><span class="line">            // è®¾ç½®å›¾ç‰‡å°ºå¯¸ä¸ºæ—§å›¾å°ºå¯¸</span><br><span class="line">            launchImage = [launchImage imageByResizeToSize:image.size contentMode:UIViewContentModeScaleAspectFit];</span><br><span class="line">            // å†™å…¥ç›®å½•ï¼Œæ›¿æ¢æ—§å›¾</span><br><span class="line">            NSData *launchData = UIImagePNGRepresentation(launchImage);</span><br><span class="line">            [launchData writeToFile:path atomically:YES];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ä»¥ä¸Šä¸¤ç§æ–¹æ³•éƒ½åªèƒ½ä¿è¯æ›´æ–°åäºŒæ¬¡å¯åŠ¨æ˜¯æ˜¾ç¤ºæ­£ç¡®çš„ï¼Œé¦–æ¬¡å¯åŠ¨æ²¡æ‰¾åˆ°åŠæ³•ã€‚</strong></p><p>ç„¶è€Œå¤§å¤šæ•°äººéƒ½æƒ³è¦é…·ç‚«çš„å¯åŠ¨ï¼Œåˆ›å»ºå‡ºäº†å¾ˆå¤šå¯åŠ¨åŠ¨ç”»ï¼Œé‚£ä¹ˆè¿™æ—¶å€™å¯¹äºè‹¹æœè¦æ±‚çš„ä¸€å¼ å›¾é€‚é…æ‰€æœ‰å±å¹•å°±å¯èƒ½ä¼šäº§ç”Ÿå¾ˆå¤šé—®é¢˜ï¼Œæ¯”å¦‚å›¾ç‰‡åœ¨åŸæœ‰çš„åæ ‡ä¸Šå¯èƒ½å‘ç”Ÿåç§»ï¼Œè€Œä½ ä¹Ÿä¸çŸ¥é“åˆ°åº•åç§»äº†å¤šå°‘ã€‚</p><p>çœ‹åˆ°æœ‰äººæå‡ºè¿™æ ·çš„æ–¹æ¡ˆï¼ŒåŸç†è¿˜æ˜¯è·Ÿä¹‹å‰çš„LaunchImageä¸€æ ·ï¼Œä½†æ˜¯ä¸çŸ¥é“è¿™ä¸ªèƒ½ä¸èƒ½åœ¨è‹¹æœæœ€æ–°çš„è¿™ä¸ªè§„åˆ™ä¸‹ä¸Šæ¶ã€‚<a href="[https://juejin.im/post/5e1463d4f265da5d716e572d](https://juejin.im/post/5e1463d4f265da5d716e572d">æ­¤å¤„æ˜¯é“¾æ¥å“¦</a><br>)</p><p>ä»¥ä¸Šä»…é™äºä¸ªäººåªæœ‰ä¸€ä¸ªæ‰‹æœºï¼Œè‹¥æœ‰å…¶ä»–æƒ…å†µï¼Œå¤§å®¶ä¹Ÿå¯ä»¥è¡¥å……ã€‚</p><h2 id="æ›´æ–°ï¼šç»è¿‡ä¸è‹¹æœå®˜æ–¹å¼€å‘äººå‘˜è®¨è®ºï¼Œæ˜ç¡®è¡¨ç¤ºè¿™ç§æƒ…å†µåªåœ¨å¼€å‘æ¨¡å¼ä¸‹é¢‘ç¹å‡ºç°ï¼Œåœ¨AppStoreä¸Šä¸ä¼šå‡ºç°ã€‚"><a href="#æ›´æ–°ï¼šç»è¿‡ä¸è‹¹æœå®˜æ–¹å¼€å‘äººå‘˜è®¨è®ºï¼Œæ˜ç¡®è¡¨ç¤ºè¿™ç§æƒ…å†µåªåœ¨å¼€å‘æ¨¡å¼ä¸‹é¢‘ç¹å‡ºç°ï¼Œåœ¨AppStoreä¸Šä¸ä¼šå‡ºç°ã€‚" class="headerlink" title="æ›´æ–°ï¼šç»è¿‡ä¸è‹¹æœå®˜æ–¹å¼€å‘äººå‘˜è®¨è®ºï¼Œæ˜ç¡®è¡¨ç¤ºè¿™ç§æƒ…å†µåªåœ¨å¼€å‘æ¨¡å¼ä¸‹é¢‘ç¹å‡ºç°ï¼Œåœ¨AppStoreä¸Šä¸ä¼šå‡ºç°ã€‚"></a>æ›´æ–°ï¼šç»è¿‡ä¸è‹¹æœå®˜æ–¹å¼€å‘äººå‘˜è®¨è®ºï¼Œæ˜ç¡®è¡¨ç¤ºè¿™ç§æƒ…å†µåªåœ¨å¼€å‘æ¨¡å¼ä¸‹é¢‘ç¹å‡ºç°ï¼Œåœ¨AppStoreä¸Šä¸ä¼šå‡ºç°ã€‚</h2>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;æ ¹æ®è‹¹æœè¦æ±‚2020å¹´4æœˆä¹‹åä¸Šçº¿çš„APPéƒ½å¿…é¡»ä½¿ç”¨LaunchScreené€‚é…å¯åŠ¨å›¾ï¼Œåœ¨ç ”ç©¶çš„è¿‡ç¨‹ä¸­å‘ç°è¿˜æ˜¯æœ‰ä¸€äº›å‘çš„ï¼Œè®°å½•ä¸€ä¸‹ã€‚&lt;/p&gt;
&lt;p&gt;ç¯å¢ƒ: Xcode 11.3 + iPhone 11 + iOS 13.3&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨LaunchScreenè®¾ç½®å¯åŠ¨</summary>
      
    
    
    
    <category term="iOS" scheme="https://github.com/GUIYIVIEW/GUIYIVIEW.github.io.git/categories/iOS/"/>
    
    
    <category term="iOS" scheme="https://github.com/GUIYIVIEW/GUIYIVIEW.github.io.git/tags/iOS/"/>
    
    <category term="å¯åŠ¨å›¾" scheme="https://github.com/GUIYIVIEW/GUIYIVIEW.github.io.git/tags/%E5%90%AF%E5%8A%A8%E5%9B%BE/"/>
    
  </entry>
  
  <entry>
    <title>Swift Target-Actionã€Curring è®¾è®¡æ¨¡å¼</title>
    <link href="https://github.com/GUIYIVIEW/GUIYIVIEW.github.io.git/2022/11/04/2022110407/"/>
    <id>https://github.com/GUIYIVIEW/GUIYIVIEW.github.io.git/2022/11/04/2022110407/</id>
    <published>2022-11-04T07:36:50.000Z</published>
    <updated>2022-11-04T07:37:31.649Z</updated>
    
    <content type="html"><![CDATA[<p>è‡ªå®šä¹‰å®ç°ç±»ä¼¼<code>UIButton</code>çš„<code>addTarget</code>äº‹ä»¶å“åº”é“¾</p><h5 id="æ²¿ç”¨OCè°ƒç”¨æ–¹å¼"><a href="#æ²¿ç”¨OCè°ƒç”¨æ–¹å¼" class="headerlink" title="æ²¿ç”¨OCè°ƒç”¨æ–¹å¼"></a>æ²¿ç”¨OCè°ƒç”¨æ–¹å¼</h5><p>åŠ¨æ€è°ƒç”¨</p><p>å£°æ˜<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">weak var target: AnyObject?;</span><br><span class="line">var action: Selector?;</span><br><span class="line">func addTarget(_ target: AnyObject, selector: Selector) &#123;</span><br><span class="line">    self.target = target;</span><br><span class="line">    self.action = selector;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>è°ƒç”¨<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">if let target = target, let selector = action &#123;</span><br><span class="line">    if let method = class_getInstanceMethod(type(of: target), selector) &#123;</span><br><span class="line">        let imp = method_getImplementation(method);</span><br><span class="line">        typealias Function = @convention(c) (AnyObject, Selector, Any?) -&gt; ();</span><br><span class="line">        let function = unsafeBitCast(imp, to: Function.self);</span><br><span class="line">        function(target, selector, self);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h5 id="Swift-CurringæŸ¯é‡ŒåŒ–æ–¹å¼"><a href="#Swift-CurringæŸ¯é‡ŒåŒ–æ–¹å¼" class="headerlink" title="Swift CurringæŸ¯é‡ŒåŒ–æ–¹å¼"></a>Swift Curring<code>æŸ¯é‡ŒåŒ–</code>æ–¹å¼</h5><p>å£°æ˜<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">protocol TargetAction &#123;</span><br><span class="line">    func performAction();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">struct TargetActionWrapper&lt;T: AnyObject&gt;: TargetAction &#123;</span><br><span class="line">    weak var target: T?;</span><br><span class="line">    let action: (T) -&gt; () -&gt; ();</span><br><span class="line">    </span><br><span class="line">    func performAction() &#123;</span><br><span class="line">        if let t = target &#123;</span><br><span class="line">            action(t)();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Model: NSObject &#123;</span><br><span class="line">    var wrapper: TargetAction?</span><br><span class="line">    func addTarget&lt;T: AnyObject&gt;(target: T, action: @escaping (T) -&gt; () -&gt; ()) &#123;</span><br><span class="line">         wrapper = TargetActionWrapper(target: target, action: action);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    func invoke() &#123;</span><br><span class="line">        wrapper?.performAction();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>è°ƒç”¨<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">let model = Model();</span><br><span class="line">model.addTarget(target: self, action: Test.invokeAction);</span><br><span class="line"></span><br><span class="line">func invokeAction() &#123;&#125;</span><br></pre></td></tr></table></figure></p><p>ä¸Šé¢æ–¹æ³•æ— æ³•ä¼ é€’å‚æ•°ï¼Œéœ€è¦è¿›ä¸€æ­¥æ‰©å±•ã€‚æ‰©å±•å¯ä»¥æ ¹æ®è‡ªå·±éœ€è¦ï¼Œæ­¤å¤„åªç®€å•ä¸¾ä¾‹ã€‚<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">protocol TargetAction &#123;</span><br><span class="line">    func performAction(_ userInfo: Any?);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">struct TargetActionWrapper&lt;T: AnyObject&gt;: TargetAction &#123;</span><br><span class="line">    weak var target: T?;</span><br><span class="line">    let action: (T) -&gt; (Any?) -&gt; ();</span><br><span class="line">    </span><br><span class="line">    func performAction(_ userInfo: Any?) &#123;</span><br><span class="line">        if let t = target &#123;</span><br><span class="line">            action(t)(userInfo);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Model: NSObject &#123;</span><br><span class="line">    var wrapper: TargetAction?</span><br><span class="line">    var userInfo: Any?;</span><br><span class="line">    func addTarget&lt;T: AnyObject&gt;(target: T, action: @escaping (T) -&gt; (Any?) -&gt; (), userInfo: Any? = nil) &#123;</span><br><span class="line">        self.userInfo = userInfo;</span><br><span class="line">         wrapper = TargetActionWrapper(target: target, action: action);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    func invoke() &#123;</span><br><span class="line">        wrapper?.performAction(userInfo);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// è°ƒç”¨</span><br><span class="line">let model = Model();</span><br><span class="line">model.addTarget(target: self, action: Test.invokeAction, userInfo: [&quot;a&quot;: &quot;b&quot;]);</span><br><span class="line"></span><br><span class="line">func invokeAction(_ sender: Any) &#123;&#125;</span><br></pre></td></tr></table></figure></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;è‡ªå®šä¹‰å®ç°ç±»ä¼¼&lt;code&gt;UIButton&lt;/code&gt;çš„&lt;code&gt;addTarget&lt;/code&gt;äº‹ä»¶å“åº”é“¾&lt;/p&gt;
&lt;h5 id=&quot;æ²¿ç”¨OCè°ƒç”¨æ–¹å¼&quot;&gt;&lt;a href=&quot;#æ²¿ç”¨OCè°ƒç”¨æ–¹å¼&quot; class=&quot;headerlink&quot; title=&quot;æ²¿ç”¨OCè°ƒç”¨æ–¹å¼&quot;&gt;&lt;/</summary>
      
    
    
    
    <category term="iOS" scheme="https://github.com/GUIYIVIEW/GUIYIVIEW.github.io.git/categories/iOS/"/>
    
    
    <category term="iOS" scheme="https://github.com/GUIYIVIEW/GUIYIVIEW.github.io.git/tags/iOS/"/>
    
    <category term="Swift" scheme="https://github.com/GUIYIVIEW/GUIYIVIEW.github.io.git/tags/Swift/"/>
    
    <category term="è®¾è®¡æ¨¡å¼" scheme="https://github.com/GUIYIVIEW/GUIYIVIEW.github.io.git/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>iOSå´©æºƒé”™è¯¯åˆ†æè®°å½•</title>
    <link href="https://github.com/GUIYIVIEW/GUIYIVIEW.github.io.git/2022/11/04/2022110406/"/>
    <id>https://github.com/GUIYIVIEW/GUIYIVIEW.github.io.git/2022/11/04/2022110406/</id>
    <published>2022-11-04T07:35:58.000Z</published>
    <updated>2022-11-04T07:36:32.371Z</updated>
    
    <content type="html"><![CDATA[<h3 id="è®°å½•å„ç§ç–‘éš¾æ‚ç—‡"><a href="#è®°å½•å„ç§ç–‘éš¾æ‚ç—‡" class="headerlink" title="è®°å½•å„ç§ç–‘éš¾æ‚ç—‡"></a>è®°å½•å„ç§ç–‘éš¾æ‚ç—‡</h3><h3 id="1-Terminating-app-due-to-uncaught-exception-â€˜UIApplicationInvalidInterfaceOrientationâ€™-reason-â€˜Supported-orientations-has-no-common-orientation-with-the-application-and-UIAlertController-shouldAutorotate-is-returning-YESâ€™"><a href="#1-Terminating-app-due-to-uncaught-exception-â€˜UIApplicationInvalidInterfaceOrientationâ€™-reason-â€˜Supported-orientations-has-no-common-orientation-with-the-application-and-UIAlertController-shouldAutorotate-is-returning-YESâ€™" class="headerlink" title="1. Terminating app due to uncaught exception â€˜UIApplicationInvalidInterfaceOrientationâ€™, reason: â€˜Supported orientations has no common orientation with the application, and [UIAlertController shouldAutorotate] is returning YESâ€™"></a>1. Terminating app due to uncaught exception â€˜UIApplicationInvalidInterfaceOrientationâ€™, reason: â€˜Supported orientations has no common orientation with the application, and [UIAlertController shouldAutorotate] is returning YESâ€™</h3><p>ç”±äºAPPåªæ”¯æŒç«–å±ï¼Œè€Œåœ¨å…¶ä¸­æŸä¸ªé¡µé¢ä¸­å•ç‹¬è®¾ç½®æ”¯æŒæ¨ªå±ï¼Œåœ¨æ­¤æ¨ªå±é¡µé¢ä¸‹ï¼Œå¦‚æœè§¦å‘äº†æŸä¸ªä¸šåŠ¡å¼¹å‡ºäº†<code>UIAlertController</code>ï¼Œåˆ™ä¼šå¯¼è‡´å´©æºƒã€‚ç½‘ä¸Šæœ‰è¯´å†™ä¸€ä¸ª<code>UIAlertController</code>åˆ†ç±»ï¼Œåœ¨å…¶ä¸­é‡å†™<code>shouldAutorotate</code>æ–¹æ³•å¤„ç†ï¼Œç„¶è€Œå†™äº†ä¹‹åå¹¶ä¸ä¼šæ‰§è¡Œã€‚<br>å½“ç„¶ä¸ä»…ä»…æ˜¯<code>UIAlertController</code>è¿™ä¸€ç§æƒ…å†µï¼Œ<code>UIImagePickerViewController</code>è¿™ç§ç³»ç»Ÿçš„ä¸œè¥¿éƒ½æœ‰å¯èƒ½è§¦å‘ã€‚<br>è§£å†³æ–¹æ¡ˆï¼šåœ¨<code>AppDelegate</code>ä¸­å®ç°ä»¥ä¸‹æ–¹æ³•æ ¹æ®å®é™…ä¸šåŠ¡åˆ¤æ–­å¤„ç†<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">- (UIInterfaceOrientationMask)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window &#123;</span><br><span class="line">    UIViewController *rootVC = window.rootViewController;</span><br><span class="line">    if (rootVC.presentedViewController) &#123;</span><br><span class="line">        UIViewController *theVC = rootVC.presentedViewController;</span><br><span class="line">        while (theVC.presentedViewController) &#123;</span><br><span class="line">            theVC = theVC.presentedViewController;</span><br><span class="line">        &#125;</span><br><span class="line">        if ([theVC shouldAutorotate]) &#123;</span><br><span class="line">            return UIInterfaceOrientationMaskAll;</span><br><span class="line">        &#125;</span><br><span class="line">        return theVC.supportedInterfaceOrientations;</span><br><span class="line">    &#125;</span><br><span class="line">    return rootVC.supportedInterfaceOrientations;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;è®°å½•å„ç§ç–‘éš¾æ‚ç—‡&quot;&gt;&lt;a href=&quot;#è®°å½•å„ç§ç–‘éš¾æ‚ç—‡&quot; class=&quot;headerlink&quot; title=&quot;è®°å½•å„ç§ç–‘éš¾æ‚ç—‡&quot;&gt;&lt;/a&gt;è®°å½•å„ç§ç–‘éš¾æ‚ç—‡&lt;/h3&gt;&lt;h3 id=&quot;1-Terminating-app-due-to-uncaught-excepti</summary>
      
    
    
    
    <category term="iOS" scheme="https://github.com/GUIYIVIEW/GUIYIVIEW.github.io.git/categories/iOS/"/>
    
    
    <category term="iOS" scheme="https://github.com/GUIYIVIEW/GUIYIVIEW.github.io.git/tags/iOS/"/>
    
    <category term="crash" scheme="https://github.com/GUIYIVIEW/GUIYIVIEW.github.io.git/tags/crash/"/>
    
  </entry>
  
  <entry>
    <title>iOSæ‰“åŒ… fastlaneå¤šä¸ªtargetåŒæ—¶æ‰“åŒ…</title>
    <link href="https://github.com/GUIYIVIEW/GUIYIVIEW.github.io.git/2022/11/04/2022110405/"/>
    <id>https://github.com/GUIYIVIEW/GUIYIVIEW.github.io.git/2022/11/04/2022110405/</id>
    <published>2022-11-04T07:31:54.000Z</published>
    <updated>2022-11-04T07:53:58.915Z</updated>
    
    <content type="html"><![CDATA[<h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><p>çªç„¶æ¥æ‰‹äº†ä¸€ä¸ªè®¸ä¹…æœªæ›¾æ›´æ–°çš„é¡¹ç›®ï¼Œé¡¹ç›®ä¸­å‡ ä¹å…¨å›½æ¯ä¸ªåŸå¸‚éƒ½å»ºäº†ä¸€ä¸ª<code>target</code>ï¼Œè€Œæ‰‹åŠ¨æ‰“åŒ…çš„è¯éœ€è¦å¾ˆå¤§çš„è€å¿ƒï¼Œä¸”æµªè´¹éå¸¸å¤šçš„æ—¶é—´ã€‚é‰´äºæ­¤ï¼Œåœ¨ç½‘ä¸Šæœç´¢äº†å¦‚ä½•ä½¿ç”¨å¤š<code>target</code>æ‰“åŒ…ï¼Œ<a href="https://www.jianshu.com/p/2893994e573b">è¿™ç¯‡æ–‡ç« è®²è§£çš„å¾ˆè¯¦ç»†</a>ï¼Œä½†æ˜¯æ¶‰åŠçš„å…¶å®ƒå†…å®¹å¤ªå¤šï¼Œç ”ç©¶è¿™äº›å†…å®¹ä¹Ÿæœ‰ç‚¹è´¹åŠ›ã€‚äºæ˜¯è‡ªå·±å°±ç¼–å†™æµ‹è¯•ã€è¾¹æ”¹è¾¹æµ‹ï¼Œç»ˆäºèŠ±è´¹äº†ä¸€ä¸ªå¤šå°æ—¶ï¼ŒæˆåŠŸå®ç°äº†ä¸€ä¸ªå‚»ç“œå¼æ•™ç¨‹<code>T_T</code>.</p><h3 id="ç¬¬ä¸€æ­¥"><a href="#ç¬¬ä¸€æ­¥" class="headerlink" title="ç¬¬ä¸€æ­¥"></a>ç¬¬ä¸€æ­¥</h3><p>ç¼–å†™<code>Fastfile</code>æ–‡ä»¶ï¼Œå…³äº<code>fastlane</code>çš„å®‰è£…å°±ä¸ä½œå™è¿°ã€‚<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line">default_platform(:ios)</span><br><span class="line"></span><br><span class="line">HOME_PATH = ENV[&quot;HOME&quot;] #home è·¯å¾„ å–ç³»ç»Ÿç¯å¢ƒå˜é‡ HOME</span><br><span class="line">IPA_BASE_PATH = &quot;#&#123;HOME_PATH&#125;/Desktop/IPA/&quot; # ipaåŸºç¡€è·¯å¾„</span><br><span class="line">FIR_IM_API_TOKEN = &quot;å¡«å†™fir token&quot; #fir.im api_token</span><br><span class="line"></span><br><span class="line">def archive(schemeName, verStr, method)</span><br><span class="line"></span><br><span class="line">    verArray = verStr.split(&quot;.&quot;)</span><br><span class="line">        build = verArray.pop()</span><br><span class="line">        version = verArray.join(&quot;.&quot;)</span><br><span class="line"></span><br><span class="line">    if !schemeName</span><br><span class="line">        notification(subtitle: &quot;å‚æ•°é”™è¯¯&quot;, message: &quot;é”™è¯¯ä¿¡æ¯ï¼šè¯·è¾“å…¥ schemeName&quot;)</span><br><span class="line">        return</span><br><span class="line">    end</span><br><span class="line"></span><br><span class="line">    if !version</span><br><span class="line">        notification(subtitle:&quot;å‚æ•°é”™è¯¯&quot;, message: &quot;é”™è¯¯ä¿¡æ¯ï¼šè¯·è¾“å…¥ version&quot;)</span><br><span class="line">        return</span><br><span class="line">    end</span><br><span class="line">    </span><br><span class="line">    if !build</span><br><span class="line">        notification(subtitle: &quot;å‚æ•°é”™è¯¯&quot;, message: &quot;é”™è¯¯ä¿¡æ¯ï¼šè¯·è¾“å…¥ build&quot;)</span><br><span class="line">        return</span><br><span class="line">    end</span><br><span class="line"></span><br><span class="line">    puts &quot;å¼€å§‹æ‰“åŒ… #&#123;schemeName&#125; #&#123;verStr&#125;&quot;</span><br><span class="line"></span><br><span class="line">    floderName = &quot;v&quot; + version + &quot;Build&quot; + build</span><br><span class="line">    if method == &quot;ad-hoc&quot;</span><br><span class="line">        dir_name = &quot;AdHoc&quot;</span><br><span class="line">    elsif method == &quot;app-store&quot;</span><br><span class="line">        dir_name = &quot;AppStore&quot;</span><br><span class="line">    elsif method == &quot;development&quot;</span><br><span class="line">        dir_name = &quot;Develop&quot;</span><br><span class="line">    else</span><br><span class="line">        dir_name = &quot;unknown&quot;</span><br><span class="line">    end</span><br><span class="line">    time = Time.new.strftime(&quot;%Y%m%d_%H%M&quot;)</span><br><span class="line">    output_directory = &quot;#&#123;IPA_BASE_PATH&#125;/#&#123;schemeName&#125;_#&#123;time&#125;/&quot; + floderName + &quot;/&quot; + dir_name</span><br><span class="line">    #ç¼–è¯‘ ipa</span><br><span class="line">    gym(</span><br><span class="line">        # æŒ‡å®šschemeåå­—</span><br><span class="line">        scheme: &quot;#&#123;schemeName&#125;&quot;,</span><br><span class="line">        # è¾“å‡ºçš„ipaåç§°</span><br><span class="line">        output_name: &quot;#&#123;schemeName&#125;&quot;,</span><br><span class="line">        # æ˜¯å¦æ¸…ç©ºä»¥å‰çš„ç¼–è¯‘ä¿¡æ¯ trueæ˜¯</span><br><span class="line">        clean: true,</span><br><span class="line">        # æŒ‡å®šè¾“å‡ºæ–‡ä»¶å¤¹ï¼Œè¿™é‡Œä¼šä¿å­˜æˆ‘ä»¬æœ€åç”Ÿæˆçš„ipaæ–‡ä»¶</span><br><span class="line">        output_directory: output_directory,</span><br><span class="line">        # æŒ‡å®šæ‰“åŒ…æ‰€ä½¿ç”¨çš„çš„è¾“å‡ºæ–¹å¼ï¼Œç›®å‰æ”¯æŒ app-store, package, ad-hoc, enterprise, development</span><br><span class="line">        export_method: method</span><br><span class="line">        )</span><br><span class="line">    return output_directory</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">def eachArchive(options, method, upload)</span><br><span class="line">    string = options[:v]</span><br><span class="line"></span><br><span class="line">    tmpArray = string.split(&quot;+&quot;)</span><br><span class="line">    puts &quot;====: #&#123;options&#125;ï¼Œ #&#123;tmpArray&#125;&quot;</span><br><span class="line">    for tmp in tmpArray do </span><br><span class="line">        array = tmp.split(&quot;_&quot;)</span><br><span class="line">        verStr = array.pop()</span><br><span class="line">        name = array.first()</span><br><span class="line">        output_directory = archive(name, verStr, method)</span><br><span class="line">        if !output_directory</span><br><span class="line">            next</span><br><span class="line">        end</span><br><span class="line"></span><br><span class="line">        if upload != true</span><br><span class="line">            next</span><br><span class="line">        end</span><br><span class="line">        # ä¸Šä¼ fir</span><br><span class="line">        fir_im_upload_path = output_directory + &quot;/#&#123;name&#125;.ipa&quot;</span><br><span class="line">        puts &quot;ä¸Šä¼ FIR è·¯å¾„ä¸ºï¼š&quot; + fir_im_upload_path</span><br><span class="line">        sh(&quot;fir publish #&#123;fir_im_upload_path&#125; -T #&#123;FIR_IM_API_TOKEN&#125;&quot;)</span><br><span class="line">        result_message = &quot;å†…æµ‹ç‰ˆæœ¬ #&#123;name&#125;.ipa ç‰ˆæœ¬å·&quot; + verStr + &quot;ä¸Šä¼  fir.im æˆåŠŸ&quot;</span><br><span class="line">        notification(subtitle:&quot;ğŸ‰ğŸ‰ #&#123;method&#125; æ“ä½œæˆåŠŸ&quot;, message:&quot;#&#123;result_message&#125;&quot;)</span><br><span class="line">        sh(&quot;say #&#123;result_message&#125;&quot;)</span><br><span class="line">    end</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">platform :ios do</span><br><span class="line">  desc &quot;Description of what the lane does&quot;</span><br><span class="line">  lane :adhoc do |options|</span><br><span class="line">      eachArchive(options, &quot;ad-hoc&quot;, true)</span><br><span class="line">  end</span><br><span class="line"></span><br><span class="line">  lane :reipa do |options|</span><br><span class="line">      eachArchive(options, &quot;app-store&quot;, false)</span><br><span class="line">  end</span><br><span class="line">end</span><br><span class="line"></span><br></pre></td></tr></table></figure></p><h3 id="ç¬¬äºŒæ­¥"><a href="#ç¬¬äºŒæ­¥" class="headerlink" title="ç¬¬äºŒæ­¥"></a>ç¬¬äºŒæ­¥</h3><p>å› ä¸ºæ˜¯å‚»ç“œå¼æ•™ç¨‹ï¼Œå¿…ç„¶è¿˜æ˜¯æœ‰äº›æ‰‹åŠ¨å·¥ç¨‹æ“ä½œçš„ï¼Œé‚£å°±æ˜¯åœ¨æ‰“ä¸åŒç±»å‹çš„åŒ…æ—¶ï¼Œéœ€è¦æ‰‹åŠ¨åœ¨å·¥ç¨‹ä¸­æ”¹å˜æè¿°æ–‡ä»¶çš„é€‰æ‹©ï¼Œæ¯”å¦‚æ‰“<code>Adhoc</code>åŒ…ï¼Œå°±éœ€è¦åœ¨å·¥ç¨‹ä¸­é€‰æ‹©<code>Adhoc</code>çš„æè¿°æ–‡ä»¶ï¼Œå…¶å®ƒäº¦å¦‚æ˜¯ã€‚</p><h3 id="ç¬¬ä¸‰æ­¥"><a href="#ç¬¬ä¸‰æ­¥" class="headerlink" title="ç¬¬ä¸‰æ­¥"></a>ç¬¬ä¸‰æ­¥</h3><p>ç”¨æ³•<br>å•ä¸ª<code>target</code>ä½¿ç”¨ <code>fastlane adhoc v:TestOne_1.2.3.45</code><br>å¤šä¸ª<code>target</code>ä½¿ç”¨ <code>fastlane adhoc v:TestOne_1.2.3.45+TestTwo_1.2.34</code><br>æ€»ä¹‹å°±æ˜¯æ ¹æ®è‡ªå·±éœ€è¦æ‰“å“ªäº›<code>target</code>ï¼Œå°±åœ¨åé¢æ‹¼ä¸Šå¯¹åº”çš„æ ¼å¼ï¼Œè¿™è¿˜çœŸæ˜¯ä¸€çœ‹å°±ä¼šçš„å‚»ç“œå¼æ–¹å¼ã€‚<br><code>+_.</code>è¿™äº›ç¬¦å·éƒ½æ˜¯ä¸ºäº†æ–¹ä¾¿åŒºåˆ†çš„ï¼Œå½“ç„¶ï¼Œè¿™ä¸ªæ ¼å¼æ˜¯å¯ä»¥è‡ªå·±æ‰‹åŠ¨æ”¹çš„ï¼Œä¹Ÿå¯ä»¥ç›´æ¥åœ¨<code>Fastfile</code>æ–‡ä»¶ä¸­å®šä¹‰ä¸€ä¸ªæ•°ç»„ï¼Œè€Œä¸ç”¨åœ¨å‘½ä»¤è¡Œæ¯æ¬¡éƒ½æ‰‹åŠ¨æ‹¼ã€‚</p><h3 id="é”™è¯¯"><a href="#é”™è¯¯" class="headerlink" title="é”™è¯¯"></a>é”™è¯¯</h3><p><code>xcodebuild: error: The workspace named &quot;CITY&quot; does not contain a scheme named &quot;CITY&quot;. The &quot;-list&quot; option can be used to find the names of the schemes in the workspace.</code><br>è§£å†³æ–¹æ¡ˆæ˜¯æŠŠå·¥ç¨‹ä¸­<code>scheme</code>å¯¹åº”çš„<code>project</code>æ”¹ä¸ºå¯¹åº”çš„<code>Workspace</code>ï¼Œå¦‚æœä¸æ˜¯<code>Workspace</code>å·¥ç¨‹çš„ä¸å¿…ç†ä¼šè¿™ä¸€æ­¥ã€‚<br><img src="/images/20221104/1094796-61e4424d6680b0dd.png" alt="QQ20211209-101443.png"></p><h3 id="ç»“å°¾"><a href="#ç»“å°¾" class="headerlink" title="ç»“å°¾"></a>ç»“å°¾</h3><p>ç›®å‰æ²¡æœ‰å‘ç°å…¶å®ƒé”™è¯¯ä¿¡æ¯ï¼Œè™½ç„¶æ˜¯å‚»ç“œå¼çš„æ–¹å¼ï¼Œä¸è¿‡ä¹ŸèŠ‚çº¦äº†ä¸å°‘æ—¶é—´ï¼Œè€Œä¸”é…ç½®ç®€å•ï¼Œä¸€çœ‹å°±æ‡‚ã€‚ç¼ºç‚¹å°±æ˜¯å¦‚æœæ‹¼æ¥æ ¼å¼ä¸­é—´æœ‰é”™è¯¯ï¼Œå°±ä¼šä»é”™è¯¯çš„<code>target</code>åœæ­¢ï¼Œä½†æ˜¯å‰é¢å·²ç»æ‰“åŒ…å¥½çš„æ˜¯ä¸å—å½±å“ï¼Œå¯ä»¥ä»é”™è¯¯çš„ä½ç½®å†æ¬¡æ‹¼æ¥åæ‰§è¡Œã€‚</p><p>å¦‚æœä½ æœ‰æ–¹ä¾¿çš„æ–¹æ³•å¯ä»¥å»é™¤æ‰‹åŠ¨æ›´æ–°æè¿°æ–‡ä»¶è¿™ä¸€æ­¥ï¼Œæ•¬è¯·ç•™è¨€ğŸ¤—</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h3&gt;&lt;p&gt;çªç„¶æ¥æ‰‹äº†ä¸€ä¸ªè®¸ä¹…æœªæ›¾æ›´æ–°çš„é¡¹ç›®ï¼Œé¡¹ç›®ä¸­å‡ ä¹å…¨å›½æ¯ä¸ªåŸå¸‚éƒ½å»ºäº†ä¸€ä¸ª&lt;code&gt;target&lt;/code&gt;ï¼Œè€Œæ‰‹åŠ¨æ‰“åŒ…çš„è¯éœ€è¦å¾ˆå¤§çš„è€å¿ƒï¼Œä¸”æµª</summary>
      
    
    
    
    <category term="iOS" scheme="https://github.com/GUIYIVIEW/GUIYIVIEW.github.io.git/categories/iOS/"/>
    
    <category term="æ‰“åŒ…" scheme="https://github.com/GUIYIVIEW/GUIYIVIEW.github.io.git/categories/iOS/%E6%89%93%E5%8C%85/"/>
    
    
    <category term="iOS" scheme="https://github.com/GUIYIVIEW/GUIYIVIEW.github.io.git/tags/iOS/"/>
    
    <category term="fastlane" scheme="https://github.com/GUIYIVIEW/GUIYIVIEW.github.io.git/tags/fastlane/"/>
    
    <category term="æ‰“åŒ…" scheme="https://github.com/GUIYIVIEW/GUIYIVIEW.github.io.git/tags/%E6%89%93%E5%8C%85/"/>
    
  </entry>
  
  <entry>
    <title>NSTimerã€CADisplayLinkã€dispatch_source_tå°è®°</title>
    <link href="https://github.com/GUIYIVIEW/GUIYIVIEW.github.io.git/2022/11/04/2022110404/"/>
    <id>https://github.com/GUIYIVIEW/GUIYIVIEW.github.io.git/2022/11/04/2022110404/</id>
    <published>2022-11-04T07:30:22.000Z</published>
    <updated>2022-11-04T07:30:55.249Z</updated>
    
    <content type="html"><![CDATA[<p>å¶ç„¶é—´å‘ç°äº†å‰äººç•™ä¸‹çš„BUGï¼Œé¡µé¢é—´å€’è®¡æ—¶åœ¨ç¨‹åºè¿›å…¥åå°åä¸åˆ·æ–°ï¼Œäºæ˜¯åˆç ”ç©¶äº†ä¸€ä¸‹å€’è®¡æ—¶ç›¸å…³çš„çŸ¥è¯†ï¼Œåœ¨æ­¤åšä¸ªæ±‡æ€»è®°å½•ã€‚<br>å…³äºåœ¨åå°è¿è¡Œçš„å®ç°ï¼Œæœ‰è¯´ç”¨æ’­æ”¾éŸ³ä¹çš„æ–¹å¼æ¥åšï¼Œæ„Ÿè§‰å¤ªéº»çƒ¦ï¼Œè€Œä¸”å®¡æ ¸çš„æ—¶å€™ä¹Ÿæ˜¯ä¸€ä¸ªéšæ‚£ã€‚</p><p>UIç›¸å…³çš„ä»£ç å°±ä¸æ”¾å‡ºæ¥äº†ï¼Œ<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br></pre></td><td class="code"><pre><span class="line">@interface TimerVC ()</span><br><span class="line">&#123;</span><br><span class="line">    NSTimeInterval  timerTime;</span><br><span class="line">    NSTimeInterval  displayTime;</span><br><span class="line">    NSTimeInterval  gcdTime;</span><br><span class="line">&#125;</span><br><span class="line">@property (nonatomic, strong) NSTimer   *timer;</span><br><span class="line">@property (nonatomic, strong) CADisplayLink *displayLink;</span><br><span class="line">@property (nonatomic, strong) dispatch_source_t   gcdTimer;</span><br><span class="line">@property (nonatomic, strong) NSDate    *tmpDate; ///&lt; è®°å½•è¿›å…¥åå°çš„æ—¶é—´</span><br><span class="line">@end</span><br><span class="line">@implementation TimerVC</span><br><span class="line">- (void)dealloc &#123;</span><br><span class="line">    [[NSNotificationCenter defaultCenter] removeObserver:self name:UIApplicationDidEnterBackgroundNotification object:nil];</span><br><span class="line">    [[NSNotificationCenter defaultCenter] removeObserver:self name:UIApplicationWillEnterForegroundNotification object:nil];</span><br><span class="line">    [self stopGcdTimerAction];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (void)viewDidLoad &#123;</span><br><span class="line">    [super viewDidLoad];</span><br><span class="line">    timerTime = displayTime = gcdTime = 1000000;</span><br><span class="line">    </span><br><span class="line">    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(apperBackground) name:UIApplicationDidEnterBackgroundNotification object:nil];</span><br><span class="line">    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(apperForeground) name:UIApplicationWillEnterForegroundNotification object:nil];</span><br><span class="line">&#125;</span><br><span class="line">#pragma mark reload</span><br><span class="line">// è¿™ä¸ªæ–¹æ³•åœ¨ç¬¬ä¸€ç¯‡æ–‡ç« â€˜ç›‘å¬ä¾§æ»‘è¿”å›äº‹ä»¶â€™ä¸­æœ‰ä»‹ç»</span><br><span class="line">- (void)didMoveToParentViewController:(UIViewController *)parent &#123;</span><br><span class="line">    [super didMoveToParentViewController:parent];</span><br><span class="line">    if (!parent) &#123;</span><br><span class="line">     /*</span><br><span class="line">       NSTimerã€CADisplayLinkéƒ½ä¼šå¼ºå¼•ç”¨selfï¼Œä¸ä¼šè‡ªåŠ¨é‡Šæ”¾ï¼Œæ‰€ä»¥å¹¶ä¸ä¼šè‡ªåŠ¨èµ°deallocæ–¹æ³•ã€‚</span><br><span class="line">     */</span><br><span class="line">        [self stopTimerAction];</span><br><span class="line">        [self stopDisplayLink];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">#pragma mark -</span><br><span class="line">- (void)timerAction &#123;</span><br><span class="line">    if (self.timer) &#123;</span><br><span class="line">        return;</span><br><span class="line">    &#125;</span><br><span class="line">    __weak typeof(&amp;*self) weakSelf = self;</span><br><span class="line">    if (@available(iOS 10.0, *)) &#123;</span><br><span class="line">        self.timer = [NSTimer scheduledTimerWithTimeInterval:1 repeats:YES block:^(NSTimer * _Nonnull timer) &#123;</span><br><span class="line">            [weakSelf handleTimerAction];</span><br><span class="line">        &#125;];</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        // Fallback on earlier versions</span><br><span class="line">        self.timer = [NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(handleTimerAction) userInfo:nil repeats:YES];</span><br><span class="line">    &#125;</span><br><span class="line">    [self.timer fire];</span><br><span class="line">    [[NSRunLoop currentRunLoop] addTimer:self.timer forMode:NSRunLoopCommonModes];</span><br><span class="line">    /*</span><br><span class="line">     å­˜åœ¨å»¶è¿Ÿï¼šä¸ç®¡æ˜¯ä¸€æ¬¡æ€§çš„è¿˜æ˜¯å‘¨æœŸæ€§çš„timerçš„å®é™…è§¦å‘äº‹ä»¶çš„æ—¶é—´ï¼Œéƒ½ä¼šä¸æ‰€åŠ å…¥çš„RunLoopå’ŒRunLoop Modeæœ‰å…³ï¼Œå¦‚æœæ­¤RunLoopæ­£åœ¨æ‰§è¡Œä¸€ä¸ªè¿ç»­æ€§çš„è¿ç®—ï¼Œtimerå°±ä¼šè¢«å»¶æ—¶è§¦å‘.</span><br><span class="line">     */</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (void)handleTimerAction &#123;</span><br><span class="line">    NSLog(@&quot;timer: %f&quot;, timerTime);</span><br><span class="line">    timerTime --;</span><br><span class="line">    if (timerTime &lt;= 0) &#123;</span><br><span class="line">        [self stopTimerAction];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (void)stopTimerAction &#123;</span><br><span class="line">    if (self.timer) &#123;</span><br><span class="line">        [_timer invalidate];</span><br><span class="line">        _timer = nil;</span><br><span class="line">        NSLog(@&quot;timer release&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (void)cadisplayLink &#123;</span><br><span class="line">    if (_displayLink) &#123;</span><br><span class="line">        return;</span><br><span class="line">    &#125;</span><br><span class="line">    self.displayLink = [CADisplayLink displayLinkWithTarget:self selector:@selector(handleDisplayLink)];</span><br><span class="line">    // é—´éš”å¤šå°‘å¸§è°ƒç”¨ä¸€æ¬¡ï¼Œé»˜è®¤æ˜¯1ï¼ŒAppleå±å¹•åˆ·æ–°ç‡é»˜è®¤æ¯ç§’60æ¬¡ï¼Œå³æ¯ç§’è°ƒç”¨60æ¬¡ã€‚</span><br><span class="line">    self.displayLink.frameInterval = 60;</span><br><span class="line">    [self.displayLink addToRunLoop:[NSRunLoop currentRunLoop] forMode:NSRunLoopCommonModes];</span><br><span class="line">    /*</span><br><span class="line">     CADisplayLinkæ˜¯ä¸€ä¸ªèƒ½è®©æˆ‘ä»¬ä»¥å’Œå±å¹•åˆ·æ–°ç‡åŒæ­¥çš„é¢‘ç‡å°†ç‰¹å®šçš„å†…å®¹ç”»åˆ°å±å¹•ä¸Šçš„å®šæ—¶å™¨ç±»ã€‚ CADisplayLinkä»¥ç‰¹å®šæ¨¡å¼æ³¨å†Œåˆ°runloopåï¼Œ æ¯å½“å±å¹•æ˜¾ç¤ºå†…å®¹åˆ·æ–°ç»“æŸçš„æ—¶å€™ï¼Œrunloopå°±ä¼šå‘ CADisplayLinkæŒ‡å®šçš„targetå‘é€ä¸€æ¬¡æŒ‡å®šçš„selectoræ¶ˆæ¯ï¼Œ CADisplayLinkç±»å¯¹åº”çš„selectorå°±ä¼šè¢«è°ƒç”¨ä¸€æ¬¡ã€‚</span><br><span class="line">     </span><br><span class="line">     iOSè®¾å¤‡çš„å±å¹•åˆ·æ–°é¢‘ç‡æ˜¯å›ºå®šçš„ï¼ŒCADisplayLinkåœ¨æ­£å¸¸æƒ…å†µä¸‹ä¼šåœ¨æ¯æ¬¡åˆ·æ–°ç»“æŸéƒ½è¢«è°ƒç”¨ï¼Œç²¾ç¡®åº¦ç›¸å½“é«˜ã€‚ä½¿ç”¨åœºåˆç›¸å¯¹ä¸“ä¸€ï¼Œé€‚åˆåšUIçš„ä¸åœé‡ç»˜ï¼Œæ¯”å¦‚è‡ªå®šä¹‰åŠ¨ç”»å¼•æ“æˆ–è€…è§†é¢‘æ’­æ”¾çš„æ¸²æŸ“ã€‚ä¸éœ€è¦åœ¨æ ¼å¤–å…³å¿ƒå±å¹•çš„åˆ·æ–°é¢‘ç‡äº†ï¼Œæœ¬èº«å°±æ˜¯è·Ÿå±å¹•åˆ·æ–°åŒæ­¥çš„ã€‚</span><br><span class="line">     */</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (void)handleDisplayLink &#123;</span><br><span class="line">    NSLog(@&quot;display: %f&quot;, displayTime);</span><br><span class="line">    displayTime --;</span><br><span class="line">    if (displayTime &lt;= 0) &#123;</span><br><span class="line">        [self displayLink];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (void)stopDisplayLink &#123;</span><br><span class="line">    if (_displayLink) &#123;</span><br><span class="line">        [_displayLink invalidate];</span><br><span class="line">        _displayLink = nil;</span><br><span class="line">        NSLog(@&quot;display release&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (void)apperBackground &#123;</span><br><span class="line">    _tmpDate = [NSDate date];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (void)apperForeground &#123;</span><br><span class="line">    NSDate *date = [NSDate date];</span><br><span class="line">    int second = (int)ceil([date timeIntervalSinceDate:_tmpDate]);</span><br><span class="line">    int tmp = gcdTime - second;</span><br><span class="line">    if (tmp &gt; 0) &#123;</span><br><span class="line">        gcdTime -= second;</span><br><span class="line">    &#125;</span><br><span class="line">    else &#123;</span><br><span class="line">        gcdTime = 0;</span><br><span class="line">    &#125;</span><br><span class="line">    val = timerTime - second;</span><br><span class="line">    if (tmp &gt; 0) &#123;</span><br><span class="line">        timerTime -= second;</span><br><span class="line">    &#125;</span><br><span class="line">    else &#123;</span><br><span class="line">        timerTime = 0;</span><br><span class="line">    &#125;</span><br><span class="line">    tmp = displayTime - second;</span><br><span class="line">    if (tmp &gt; 0) &#123;</span><br><span class="line">        displayTime -= second;</span><br><span class="line">    &#125;</span><br><span class="line">    else &#123;</span><br><span class="line">        displayTime = 0;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (void)gcdTimerAction &#123;</span><br><span class="line">    if (self.gcdTimer) &#123;</span><br><span class="line">        return;</span><br><span class="line">    &#125;</span><br><span class="line">    dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);</span><br><span class="line">    _gcdTimer = dispatch_source_create(DISPATCH_SOURCE_TYPE_TIMER, 0, 0, queue);</span><br><span class="line">    /*</span><br><span class="line">     dispatch_source_set_timer å½“æˆ‘ä»¬ä½¿ç”¨dispatch_time æˆ–è€… DISPATCH_TIME_NOW æ—¶ï¼Œç³»ç»Ÿä¼šä½¿ç”¨é»˜è®¤æ—¶é’Ÿæ¥è¿›è¡Œè®¡æ—¶ã€‚ç„¶è€Œå½“ç³»ç»Ÿä¼‘çœ çš„æ—¶å€™ï¼Œé»˜è®¤æ—¶é’Ÿæ˜¯ä¸èµ°çš„ï¼Œä¹Ÿå°±ä¼šå¯¼è‡´è®¡æ—¶å™¨åœæ­¢ã€‚ä½¿ç”¨ dispatch_walltime å¯ä»¥è®©è®¡æ—¶å™¨æŒ‰ç…§çœŸå®æ—¶é—´é—´éš”è¿›è¡Œè®¡æ—¶ã€‚</span><br><span class="line">     ä½†æ˜¯è®¾ç½®ä¸ºdispatch_walltime(NULL, 0)ä¹‹åï¼Œå¦‚æœåœ¨è®¾ç½®é‡Œè®¾ç½®æ—¥æœŸä¸ºä¹‹å‰çš„æ—¥æœŸï¼Œåˆ™ä¸ä¼šå†è°ƒç”¨æ¬¡æ–¹æ³•ï¼Œè€Œè®¾ç½®ä¸ºDISPATCH_TIME_NOWåˆ™å¯ä»¥</span><br><span class="line">     */</span><br><span class="line">    dispatch_source_set_timer(_gcdTimer, DISPATCH_TIME_NOW, 1 * NSEC_PER_SEC, 0 * NSEC_PER_SEC);</span><br><span class="line">    __weak typeof(&amp;*self) weakSelf = self;</span><br><span class="line">    dispatch_source_set_event_handler(_gcdTimer, ^&#123;</span><br><span class="line">        [weakSelf handleGcdTimerAction];</span><br><span class="line">    &#125;);</span><br><span class="line">    dispatch_resume(_gcdTimer);</span><br><span class="line">    /*</span><br><span class="line">     dispatch_suspend(&lt;#dispatch_object_t  _Nonnull object#&gt;)</span><br><span class="line">     è¿™ä¸ªæ˜¯æŒ‚èµ·ï¼Œä¸èƒ½å†è¿™ä¹‹åé‡Šæ”¾_gcdTimerï¼Œå³_gcdTimer = nil;ä¼šå´©æºƒï¼Œé‡Šæ”¾åªèƒ½åœ¨dispatch_source_cancel()ä¹‹åã€‚</span><br><span class="line">     */</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (void)handleGcdTimerAction &#123;</span><br><span class="line">    NSLog(@&quot;gcd: %f&quot;, gcdTime);</span><br><span class="line">    gcdTime --;</span><br><span class="line">    if (gcdTime &lt;= 0) &#123;</span><br><span class="line">        [self stopGcdTimerAction];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (void)stopGcdTimerAction &#123;</span><br><span class="line">    if (_gcdTimer) &#123;</span><br><span class="line">        dispatch_source_cancel(_gcdTimer);</span><br><span class="line">        _gcdTimer = nil;</span><br><span class="line">        NSLog(@&quot;gcd release&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure><br>åŠ æ²¹ï¼ï¼ï¼</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;å¶ç„¶é—´å‘ç°äº†å‰äººç•™ä¸‹çš„BUGï¼Œé¡µé¢é—´å€’è®¡æ—¶åœ¨ç¨‹åºè¿›å…¥åå°åä¸åˆ·æ–°ï¼Œäºæ˜¯åˆç ”ç©¶äº†ä¸€ä¸‹å€’è®¡æ—¶ç›¸å…³çš„çŸ¥è¯†ï¼Œåœ¨æ­¤åšä¸ªæ±‡æ€»è®°å½•ã€‚&lt;br&gt;å…³äºåœ¨åå°è¿è¡Œçš„å®ç°ï¼Œæœ‰è¯´ç”¨æ’­æ”¾éŸ³ä¹çš„æ–¹å¼æ¥åšï¼Œæ„Ÿè§‰å¤ªéº»çƒ¦ï¼Œè€Œä¸”å®¡æ ¸çš„æ—¶å€™ä¹Ÿæ˜¯ä¸€ä¸ªéšæ‚£ã€‚&lt;/p&gt;
&lt;p&gt;UIç›¸å…³çš„ä»£ç å°±ä¸æ”¾å‡ºæ¥äº†ï¼Œ&lt;br&gt;&lt;fig</summary>
      
    
    
    
    <category term="iOS" scheme="https://github.com/GUIYIVIEW/GUIYIVIEW.github.io.git/categories/iOS/"/>
    
    
    <category term="iOS" scheme="https://github.com/GUIYIVIEW/GUIYIVIEW.github.io.git/tags/iOS/"/>
    
  </entry>
  
  <entry>
    <title>Masonry--æ›´æ–°åŠ¨ç”»</title>
    <link href="https://github.com/GUIYIVIEW/GUIYIVIEW.github.io.git/2022/11/04/2022110403/"/>
    <id>https://github.com/GUIYIVIEW/GUIYIVIEW.github.io.git/2022/11/04/2022110403/</id>
    <published>2022-11-04T07:28:15.000Z</published>
    <updated>2022-11-04T07:30:11.833Z</updated>
    
    <content type="html"><![CDATA[<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">- (void)viewDidLoad &#123;</span><br><span class="line">    [super viewDidLoad];</span><br><span class="line">    /// æ·»åŠ è§†å›¾</span><br><span class="line">    [self.view addSubviews:self.bottomView];</span><br><span class="line">   /// 1.åˆå§‹å¸ƒå±€</span><br><span class="line">    [self.bottomView mas_makeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">        make.left.right.mas_equalTo(0);</span><br><span class="line">        make.bottom.mas_equalTo(kBYScreen_Height);</span><br><span class="line">    &#125;];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (void)show &#123;</span><br><span class="line">  /// 2.åœ¨è¿™é‡Œå…ˆå¯¹å¸ƒå±€çº¦æŸè¿›è¡Œæ›´æ–°</span><br><span class="line">  [self.bottomView mas_updateConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">        make.bottom.mas_equalTo(0);</span><br><span class="line">    &#125;];</span><br><span class="line">    [UIView animateWithDuration:0.3 animations:^&#123;</span><br><span class="line">        /// æ³¨æ„:</span><br><span class="line">        /// 3.è¿™é‡Œä¸€å®šæ˜¯è¦åšåŠ¨ç”»çš„è§†å›¾çš„çˆ¶è§†å›¾ï¼Œæˆ–è€…çˆ¶è§†å›¾çš„çˆ¶è§†å›¾ï¼Œæ€»ä¹‹å°±æ˜¯æ¯”å®ƒè¾ˆåˆ†é«˜çš„</span><br><span class="line">        [self.bottomView.superView layoutIfNeeded];</span><br><span class="line">      /// è¿™é‡Œå¯ä»¥å¤„ç†å…¶ä»–çš„äº‹æƒ…,æ¯”å¦‚æ”¹å˜çˆ¶è§†å›¾çš„é€æ˜åº¦</span><br><span class="line">    &#125; completion:^(BOOL finished) &#123;</span><br><span class="line">        </span><br><span class="line">    &#125;];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œç®€å•è®°å½•ä¸€ä¸‹ï¼Œå…å¾—ä¸‹ä¸€æ¬¡åˆå¿˜è®°äº†!!!</p>]]></content>
    
    
      
      
    <summary type="html">&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span c</summary>
      
    
    
    
    <category term="iOS" scheme="https://github.com/GUIYIVIEW/GUIYIVIEW.github.io.git/categories/iOS/"/>
    
    
    <category term="iOS" scheme="https://github.com/GUIYIVIEW/GUIYIVIEW.github.io.git/tags/iOS/"/>
    
  </entry>
  
  <entry>
    <title>å¾®ä¿¡å°ç¨‹åº-flexå¸ƒå±€</title>
    <link href="https://github.com/GUIYIVIEW/GUIYIVIEW.github.io.git/2022/11/04/2022110402/"/>
    <id>https://github.com/GUIYIVIEW/GUIYIVIEW.github.io.git/2022/11/04/2022110402/</id>
    <published>2022-11-04T07:25:25.000Z</published>
    <updated>2022-11-04T07:28:58.671Z</updated>
    
    <content type="html"><![CDATA[<h3 id="ä¼¸ç¼©å®¹å™¨"><a href="#ä¼¸ç¼©å®¹å™¨" class="headerlink" title="ä¼¸ç¼©å®¹å™¨"></a>ä¼¸ç¼©å®¹å™¨</h3><p>è®¾æœ‰<code>display:flex</code>æˆ–è€…<code>display:block</code>çš„å…ƒç´ å°±æ˜¯ä¸€ä¸ª<code>flex Container(ä¼¸ç¼©å®¹å™¨)</code>ï¼Œé‡Œé¢çš„å­å…ƒç´ ç§°ä¸º<code>flex item(ä¼¸ç¼©é¡¹ç›®)</code>ï¼Œ<code>flex container</code>ä¸­å­å…ƒç´ éƒ½æ˜¯ä½¿ç”¨<code>Flex</code>å¸ƒå±€æ’ç‰ˆã€‚</p><p><code>display:block</code>æŒ‡å®šä¸ºå—å†…å®¹å™¨æ¨¡å¼ï¼Œæ€»æ˜¯ä½¿ç”¨æ–°è¡Œå¼€å§‹æ˜¾ç¤ºï¼Œå¾®ä¿¡å°ç¨‹åºçš„<code>è§†å›¾å®¹å™¨(view,scroll-viewå’Œswiper)</code>é»˜è®¤éƒ½æ˜¯<code>dispaly:block</code>ã€‚</p><p><code>display:flex</code>æŒ‡å®šä¸ºè¡Œå†…å®¹å™¨æ¨¡å¼ï¼Œåœ¨ä¸€è¡Œå†…æ˜¾ç¤ºå­å…ƒç´ ï¼Œå¯ä»¥ä½¿ç”¨<code>flex-wrap</code>å±æ€§æŒ‡å®šå…¶æ˜¯å¦æ¢è¡Œï¼Œ<code>flex-wrap</code>æœ‰ä¸‰ä¸ªå€¼:<code>nowrap</code>(ä¸æ¢è¡Œ),<code>wrap</code>(æ¢è¡Œ),<code>wrap-reverse</code>(æ¢è¡Œç¬¬ä¸€è¡Œåœ¨ä¸‹é¢)</p><h3 id="ä¸»è½´-main-axis-å’Œä¾§è½´-cross-axis"><a href="#ä¸»è½´-main-axis-å’Œä¾§è½´-cross-axis" class="headerlink" title="ä¸»è½´(main axis)å’Œä¾§è½´(cross axis)"></a>ä¸»è½´(main axis)å’Œä¾§è½´(cross axis)</h3><p>ä»å·¦åˆ°å³ã€ä»å³åˆ°å·¦ã€ä»ä¸Šåˆ°ä¸‹ã€ä»ä¸‹åˆ°ä¸Šï¼Œéƒ½å¯ä»¥æŒ‡å®šä¸»è½´çš„èµ·ç‚¹å’Œç»ˆç‚¹ï¼Œä¸ä¸»è½´å‚ç›´æ–¹å‘çš„ä¸ºä¾§è½´ï¼Œä¹Ÿæœ‰ç›¸åº”çš„èµ·ç‚¹å’Œç»ˆç‚¹ã€‚</p><h4 id="flex-direction"><a href="#flex-direction" class="headerlink" title="flex-direction"></a>flex-direction</h4><ol><li>row ä»å·¦åˆ°å³çš„æ°´å¹³æ–¹å‘ä¸ºä¸»è½´</li><li>row-reverse ä»å³åˆ°å·¦çš„æ°´å¹³æ–¹å‘ä¸ºä¸»è½´</li><li>column ä»ä¸Šåˆ°ä¸‹çš„å‚ç›´æ–¹å‘ä¸ºä¸»è½´</li><li>column-reverse ä»ä¸‹åˆ°ä¸Šçš„å‚ç›´æ–¹å‘ä¸ºä¸»è½´</li></ol><h4 id="å¯¹é½æ–¹å¼"><a href="#å¯¹é½æ–¹å¼" class="headerlink" title="å¯¹é½æ–¹å¼"></a>å¯¹é½æ–¹å¼</h4><p>å­å…ƒç´ æœ‰ä¸¤ç§å¯¹é½æ–¹å¼</p><p><code>justify-content</code> å®šä¹‰å­å…ƒç´ åœ¨ä¸»è½´ä¸Šé¢çš„å¯¹é½æ–¹å¼</p><p><code>align-items</code> å®šä¹‰å­å…ƒç´ åœ¨ä¾§è½´ä¸Šå¯¹é½çš„æ–¹å¼</p><blockquote><h4 id="justify-content"><a href="#justify-content" class="headerlink" title="justify-content"></a>justify-content</h4><ol><li>flex-start ä¸»è½´èµ·ç‚¹å¯¹é½</li><li>flex-end ä¸»è½´ç»ˆç‚¹å¯¹é½</li><li>center ä¸»è½´æ–¹å‘å±…ä¸­å¯¹é½</li><li>space-between ä¸¤ç«¯å¯¹é½ï¼Œä¸¤ç«¯å­å…ƒç´ åˆ†åˆ«é ä¸¤ç«¯å¯¹é½ï¼Œå…¶ä»–å­å…ƒç´ ä¹‹é—´é—´éš”ç›¸ç­‰</li><li>space-around æ¯ä¸ªå­å…ƒç´ ä¹‹é—´é—´è·ç›¸ç­‰ï¼Œä¸¤ç«¯å­å…ƒç´ é—´è·çˆ¶å®¹å™¨ä¸å…¶ä»–å­å…ƒç´ é—´è·ç›¸ç­‰</li></ol></blockquote><p><code>justify-content</code>çš„å¯¹é½æ–¹å¼ä¸ä¸»è½´æ–¹å‘ç›¸å…³ã€‚</p><blockquote><h4 id="align-items"><a href="#align-items" class="headerlink" title="align-items"></a>align-items</h4><ol><li>stretch å¡«å……æ•´ä¸ªå®¹å™¨</li><li>flex-start ä¾§è½´çš„èµ·ç‚¹å¯¹é½</li><li>flex-end ä¾§è½´çš„ç»ˆç‚¹å¯¹é½</li><li>center ä¾§è½´æ–¹å‘å±…ä¸­å¯¹é½</li><li>baseline ä»¥å­å…ƒç´ çš„ç¬¬ä¸€è¡Œæ–‡æœ¬å¯¹é½</li></ol></blockquote><p><code>align-items</code>çš„å¯¹é½æ–¹å¼ä¸ä¾§è½´æ–¹å‘æœ‰å…³</p><h3 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">.wxml æ–‡ä»¶</span><br><span class="line"></span><br><span class="line">&lt;view class=&quot;test_container&quot;&gt;</span><br><span class="line">  &lt;view class=&quot;test_top&quot;&gt;</span><br><span class="line">    &lt;view class=&quot;test_title&quot;&gt;æµ‹è¯•æ–‡æœ¬&lt;/view&gt;</span><br><span class="line">    &lt;view class=&quot;test_select&quot;&gt;æŒ‰é’®&lt;/view&gt;</span><br><span class="line">  &lt;/view&gt;</span><br><span class="line">  &lt;view class=&quot;test_bottom&quot;&gt;</span><br><span class="line">    &lt;view class=&quot;test_left&quot;&gt;</span><br><span class="line">      &lt;input placeholder=&quot;è¯·è¾“å…¥&quot; /&gt;</span><br><span class="line">    &lt;/view&gt;</span><br><span class="line">    &lt;view class=&quot;test_center&quot;&gt;åˆ°&lt;/view&gt;</span><br><span class="line">    &lt;view class=&quot;test_right&quot;&gt;</span><br><span class="line">      &lt;input placeholder=&quot;è¯·è¾“å…¥&quot; /&gt;</span><br><span class="line">    &lt;/view&gt;</span><br><span class="line">  &lt;/view&gt;</span><br><span class="line">&lt;/view&gt;</span><br><span class="line"></span><br><span class="line">.wxss æ–‡ä»¶</span><br><span class="line"></span><br><span class="line">.test_container &#123;</span><br><span class="line">  padding: 50rpx;</span><br><span class="line">&#125;</span><br><span class="line">.test_top &#123;</span><br><span class="line">  display: flex;</span><br><span class="line">  justify-content: flex-start;</span><br><span class="line">  align-items: center;</span><br><span class="line">&#125;</span><br><span class="line">.test_title &#123;</span><br><span class="line">  width: 160rpx;</span><br><span class="line">  line-height: 50rpx;</span><br><span class="line">&#125;</span><br><span class="line">.test_select &#123;</span><br><span class="line">  width: 120rpx;</span><br><span class="line">  text-align: center;</span><br><span class="line">  line-height: 50rpx;</span><br><span class="line">  background: blue;</span><br><span class="line">  border-radius: 4px;</span><br><span class="line">&#125;</span><br><span class="line">.test_bottom &#123;</span><br><span class="line">  margin-left: 160rpx;</span><br><span class="line">  margin-top: 30rpx;</span><br><span class="line">  display: flex;</span><br><span class="line">  justify-content: flex-start;</span><br><span class="line">  align-items: center;</span><br><span class="line">&#125;</span><br><span class="line">.test_left &#123;</span><br><span class="line">  border: 1px solid black;</span><br><span class="line">&#125;</span><br><span class="line">.test_center &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">.test_right &#123;</span><br><span class="line">  border: 1px solid black;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;ä¼¸ç¼©å®¹å™¨&quot;&gt;&lt;a href=&quot;#ä¼¸ç¼©å®¹å™¨&quot; class=&quot;headerlink&quot; title=&quot;ä¼¸ç¼©å®¹å™¨&quot;&gt;&lt;/a&gt;ä¼¸ç¼©å®¹å™¨&lt;/h3&gt;&lt;p&gt;è®¾æœ‰&lt;code&gt;display:flex&lt;/code&gt;æˆ–è€…&lt;code&gt;display:block&lt;/code&gt;çš„å…ƒç´ å°±æ˜¯ä¸€ä¸ª</summary>
      
    
    
    
    <category term="å°ç¨‹åº" scheme="https://github.com/GUIYIVIEW/GUIYIVIEW.github.io.git/categories/%E5%B0%8F%E7%A8%8B%E5%BA%8F/"/>
    
    
    <category term="å°ç¨‹åº" scheme="https://github.com/GUIYIVIEW/GUIYIVIEW.github.io.git/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/"/>
    
    <category term="Weex" scheme="https://github.com/GUIYIVIEW/GUIYIVIEW.github.io.git/tags/Weex/"/>
    
  </entry>
  
  <entry>
    <title>iOSç›‘å¬ç³»ç»Ÿä¾§æ»‘è¿”å›äº‹ä»¶</title>
    <link href="https://github.com/GUIYIVIEW/GUIYIVIEW.github.io.git/2022/11/04/2022110401/"/>
    <id>https://github.com/GUIYIVIEW/GUIYIVIEW.github.io.git/2022/11/04/2022110401/</id>
    <published>2022-11-04T07:16:08.000Z</published>
    <updated>2022-11-04T07:24:17.416Z</updated>
    
    <content type="html"><![CDATA[<p><code>UIViewController</code>æ–¹æ³•<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- (void)willMoveToParentViewController:(UIViewController)parent</span><br><span class="line">- (void)didMoveToParentViewController:(UIViewController)parent</span><br></pre></td></tr></table></figure><br>è¿™ä¸¤ä¸ªæ–¹æ³•æ˜¯ç³»ç»Ÿå†™çš„ç±»åˆ«<code>UIContainerViewControllerCallbacks</code>ä¸­çš„æ–¹æ³•ã€‚<br>åªéœ€è¦åœ¨å½“å‰ä½¿ç”¨çš„æ§åˆ¶å™¨ä¸­é‡å†™è¿™ä¸¤ä¸ªæ–¹æ³•å°±å¯ä»¥äº†ï¼Œç¬¬ä¸€æ¬¡pushè¿›æ¥çš„æ—¶å€™ä¸¤ä¸ªæ–¹æ³•éƒ½ä¼šè°ƒç”¨ï¼Œparentçš„å€¼ä¸ä¸ºç©ºã€‚å½“å¼€å§‹ä½¿ç”¨ç³»ç»Ÿä¾§æ»‘çš„æ—¶å€™ï¼Œä¼šå…ˆè°ƒç”¨willMoveï¼Œè€Œparentçš„å€¼ä¸ºç©ºï¼›å½“æ»‘åŠ¨ç»“æŸåè¿”å›äº†ä¸Šä¸ªé¡µé¢ï¼Œåˆ™ä¼šè°ƒç”¨didMoveï¼Œparentçš„å€¼ä¹Ÿä¸ºç©ºï¼Œå¦‚æœæ»‘åŠ¨ç»“æŸæ²¡æœ‰è¿”å›ä¸Šä¸ªé¡µé¢ï¼Œä¹Ÿå°±æ˜¯è½»è½»åˆ’äº†ä¸€ä¸‹è¿˜åœ¨å½“å‰é¡µé¢ï¼Œé‚£ä¹ˆåˆ™ä¸ä¼šè°ƒç”¨didMoveæ–¹æ³•ã€‚<br>æ‰€ä»¥å¦‚æœæƒ³è¦åœ¨ä¾§æ»‘è¿”å›ååœ¨ä¸Šä¸ªé¡µé¢åšä¸€äº›æ“ä½œçš„è¯ï¼Œå¯ä»¥åœ¨didMoveæ–¹æ³•ä¸­æ ¹æ®parentçš„å€¼æ¥åˆ¤æ–­ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">- (void)willMoveToParentViewController:(UIViewController)parent&#123;</span><br><span class="line">        [superwillMoveToParentViewController:parent];</span><br><span class="line">        NSLog(@&quot;%s,%@&quot;,FUNCTION,parent);</span><br><span class="line">&#125;</span><br><span class="line">- (void)didMoveToParentViewController:(UIViewController)parent&#123;</span><br><span class="line">        [superdidMoveToParentViewController:parent];</span><br><span class="line">        NSLog(@&quot;%s,%@&quot;,FUNCTION,parent);</span><br><span class="line">        if(!parent)&#123;</span><br><span class="line">            NSLog(@&quot;é¡µé¢popæˆåŠŸäº†&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a href="https://www.jianshu.com/p/b7331546a18b">åŸæ–‡åœ°å€</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;code&gt;UIViewController&lt;/code&gt;æ–¹æ³•&lt;br&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;</summary>
      
    
    
    
    <category term="iOS" scheme="https://github.com/GUIYIVIEW/GUIYIVIEW.github.io.git/categories/iOS/"/>
    
    
    <category term="iOS" scheme="https://github.com/GUIYIVIEW/GUIYIVIEW.github.io.git/tags/iOS/"/>
    
    <category term="ä¾§æ»‘è¿”å›" scheme="https://github.com/GUIYIVIEW/GUIYIVIEW.github.io.git/tags/%E4%BE%A7%E6%BB%91%E8%BF%94%E5%9B%9E/"/>
    
  </entry>
  
  <entry>
    <title>åœ°å€è¿ç§»</title>
    <link href="https://github.com/GUIYIVIEW/GUIYIVIEW.github.io.git/2022/11/04/hello-world/"/>
    <id>https://github.com/GUIYIVIEW/GUIYIVIEW.github.io.git/2022/11/04/hello-world/</id>
    <published>2022-11-04T03:55:52.189Z</published>
    <updated>2022-11-04T07:35:30.395Z</updated>
    
    <content type="html"><![CDATA[<p>è¿‘æ¥ç®€ä¹¦ç½‘ç«™æ€»æ˜¯æŠ¥é”™æ‰“ä¸å¼€ï¼Œäºæ˜¯å°è¯•æ­å»ºä¸€ä¸ªç®€æ´çš„è®°å½•æ–‡æ¡£ï¼Œå†…å®¹è¿ç§»åˆ°è¿™é‡Œã€‚<br><a href="https://www.jianshu.com/u/40ce3abe6698">ç®€ä¹¦</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;è¿‘æ¥ç®€ä¹¦ç½‘ç«™æ€»æ˜¯æŠ¥é”™æ‰“ä¸å¼€ï¼Œäºæ˜¯å°è¯•æ­å»ºä¸€ä¸ªç®€æ´çš„è®°å½•æ–‡æ¡£ï¼Œå†…å®¹è¿ç§»åˆ°è¿™é‡Œã€‚&lt;br&gt;&lt;a href=&quot;https://www.jianshu.com/u/40ce3abe6698&quot;&gt;ç®€ä¹¦&lt;/a&gt;&lt;/p&gt;
</summary>
      
    
    
    
    
    <category term="Blog" scheme="https://github.com/GUIYIVIEW/GUIYIVIEW.github.io.git/tags/Blog/"/>
    
  </entry>
  
</feed>
